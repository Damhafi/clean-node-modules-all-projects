const fs = require('fs');
const { exec } = require('child_process');

// Função para excluir a pasta node_modules
const deleteNodeModules = (path) => {
    fs.readdirSync(path).forEach(file => {
        const filePath = `${path}/${file}`;
        if (fs.statSync(filePath).isDirectory()) {
            if (file === 'node_modules') {
                console.log(`Deleting node_modules in ${path}`);
                exec(`rm -rf ${filePath}`, (err, stdout, stderr) => {
                    if (err) {
                        console.error(`Error deleting node_modules in ${path}: ${err}`);
                    } else {
                        console.log(`Deleted node_modules in ${path}`);
                    }
                });
            } else {
                console.log(`Processing directory: ${filePath}`);
                deleteNodeModules(filePath);
            }
        }
    });
};

// Diretório raiz onde estão os projetos
const rootDir = 'C:/Users/...';

// Chama a função para excluir node_modules em cada projeto
deleteNodeModules(rootDir);
